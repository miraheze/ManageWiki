{"version":3,"sources":["../src/iterateJsdoc.js"],"names":["globalState","Map","hasSeeWithLink","spec","tag","test","source","getTokenizers","includes","remainder","tokens","description","pos","search","name","slice","extra","postName","match","optional","parseComment","commentNode","indent","value","tokenizers","number","delimiter","end","postDelimiter","start","getBasicUtils","context","tagNamePreference","mode","utils","reportSettings","message","report","loc","column","line","parseClosureTemplateTag","jsdocUtils","getPreferredTagNameObject","tagName","ret","getPreferredTagName","isObject","replacement","blocked","getUtils","node","jsdoc","jsdocNode","settings","iteratingAll","ruleConfig","ancestors","getAncestors","sourceCode","getSourceCode","overrideReplacesDocs","implementsReplacesDocs","augmentsExtendsReplacesDocs","maxLines","minLines","isIteratingFunction","type","isVirtualFunction","hasATag","stringify","tagBlock","specRewire","reportJSDoc","msg","handler","fixer","replaceText","getRegexFromString","str","requiredFlags","getTagDescription","tg","descriptions","some","postTag","desc","push","join","getDescription","lastDescriptionLine","idx","changeTag","forEach","src","setTag","removeTag","tagIndex","tags","lastIndex","firstNumber","sourceIndex","findIndex","srcNumber","splice","addTag","targetTagName","length","flattenRoots","params","getFunctionParameterNames","useDefaultObjectProperties","hasParams","isGenerator","generator","declaration","isConstructor","getJsdocTagsDeep","skipReportingBlockedTag","allowObjectReturn","defaultMessage","hasTag","getTags","isValidTag","definedTags","comparePaths","dropPathSegmentQuotes","avoidDocs","classHasTag","exemptSpeciaMethods","meta","schema","exemptedBy","options","getPresentTags","method","otherModeMaps","result","otherResult","otherModeMap","otherMode","every","getTagStructureForMode","mde","structuredTags","hasDefinedTypeTag","hasValueOrExecutorHasNonEmptyResolveValue","anyPromiseAsReturn","hasYieldValue","hasYieldReturnValue","hasThrowValue","isAsync","async","filterTags","item","tagList","filter","getTagsByType","hasOptionTag","Boolean","getClassNode","reverse","find","parent","getClassJsdoc","classNode","classJsdocNode","indnt","repeat","classJsdoc","forEachPreferredTag","arrayHandler","matchingJsdocTags","_","matchingJsdocTag","getSettings","ignorePrivate","ignoreInternal","Number","preferredTypes","parserPath","setTagStructure","overrideTagStructure","error","makeReport","fix","jsdocLoc","data","lineNumber","colNumber","iterate","lines","iterator","state","sourceLine","charAt","checkInternal","checkPrivate","iterateAllJsdocs","trackedJsdocs","callIterator","jsdocNodes","lastCall","getText","exit","create","reducedNode","comment","nonComment","allComments","getAllComments","untrackedJSdoc","checkFile","iterateJsdoc","metaType","TypeError","contexts","contextDefaults","enforcedContexts","checkJsdoc","getContextObject","ArrowFunctionExpression","FunctionDeclaration","FunctionExpression"],"mappings":"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","sourcesContent":["import {\n  parse as commentParser, stringify as commentStringify,\n} from 'comment-parser';\nimport {\n  // eslint-disable-next-line import/no-named-default\n  default as descriptionTokenizer,\n  getJoiner,\n} from 'comment-parser/lib/parser/tokenizers/description';\nimport nameTokenizer from 'comment-parser/lib/parser/tokenizers/name';\nimport tagTokenizer from 'comment-parser/lib/parser/tokenizers/tag';\nimport typeTokenizer from 'comment-parser/lib/parser/tokenizers/type';\nimport {\n  rewireSpecs,\n  seedBlock,\n  seedTokens,\n} from 'comment-parser/lib/util';\nimport _ from 'lodash';\nimport {\n  getJSDocComment, getReducedASTNode,\n} from './eslint/getJSDocComment';\nimport jsdocUtils from './jsdocUtils';\n\n/*\nconst {\n   align as commentAlign,\n  flow: commentFlow,\n  indent: commentIndent,\n} = transforms;\n*/\n\nconst globalState = new Map();\n\nconst hasSeeWithLink = (spec) => {\n  return spec.tag === 'see' && (/\\{@link.+?\\}/u).test(spec.source[0].source);\n};\n\nconst getTokenizers = () => {\n  // trim\n  return [\n    // Tag\n    tagTokenizer(),\n\n    // Type\n    (spec) => {\n      if (['default', 'defaultvalue', 'see'].includes(spec.tag)) {\n        return spec;\n      }\n\n      return typeTokenizer()(spec);\n    },\n\n    // Name\n    (spec) => {\n      if (spec.tag === 'template') {\n        // const preWS = spec.postTag;\n        const remainder = spec.source[0].tokens.description;\n\n        const pos = remainder.search(/(?<![\\s,])\\s/);\n\n        const name = pos === -1 ? remainder : remainder.slice(0, pos);\n        const extra = remainder.slice(pos + 1);\n        const [, postName, description] = extra.match(/(\\s*)(.*)/);\n\n        spec.name = name;\n        spec.optional = false;\n        const {tokens} = spec.source[0];\n        tokens.name = name;\n        tokens.postName = postName;\n        tokens.description = description;\n\n        return spec;\n      }\n\n      if ([\n        'example', 'return', 'returns', 'throws', 'exception',\n        'access', 'version', 'since', 'license', 'author',\n        'default', 'defaultvalue',\n      ].includes(spec.tag) || hasSeeWithLink(spec)) {\n        return spec;\n      }\n\n      return nameTokenizer()(spec);\n    },\n\n    // Description\n    (spec) => {\n      return descriptionTokenizer(getJoiner('preserve'))(spec);\n    },\n  ];\n};\n\n/**\n *\n * @param {object} commentNode\n * @param {string} indent Whitespace\n * @returns {object}\n */\nconst parseComment = (commentNode, indent) => {\n  // Preserve JSDoc block start/end indentation.\n  return commentParser(`/*${commentNode.value}*/`, {\n    // @see https://github.com/yavorskiy/comment-parser/issues/21\n    tokenizers: getTokenizers(),\n  })[0] || seedBlock({\n    source: [\n      {\n        number: 0,\n        tokens: seedTokens({\n          delimiter: '/**',\n          description: '',\n          end: '',\n          postDelimiter: '',\n          start: '',\n        }),\n      },\n      {\n        number: 1,\n        tokens: seedTokens({\n          delimiter: '',\n          description: '',\n          end: '*/',\n          postDelimiter: '',\n          start: indent + ' ',\n        }),\n      },\n    ],\n  });\n};\n\nconst getBasicUtils = (context, {tagNamePreference, mode}) => {\n  const utils = {};\n  utils.reportSettings = (message) => {\n    context.report({\n      loc: {\n        start: {\n          column: 1,\n          line: 1,\n        },\n      },\n      message,\n    });\n  };\n\n  utils.parseClosureTemplateTag = (tag) => {\n    return jsdocUtils.parseClosureTemplateTag(tag);\n  };\n\n  utils.getPreferredTagNameObject = ({tagName}) => {\n    const ret = jsdocUtils.getPreferredTagName(context, mode, tagName, tagNamePreference);\n    const isObject = ret && typeof ret === 'object';\n    if (ret === false || isObject && !ret.replacement) {\n      return {\n        blocked: true,\n        tagName,\n      };\n    }\n\n    return ret;\n  };\n\n  return utils;\n};\n\nconst getUtils = (\n  node,\n  jsdoc,\n  jsdocNode,\n  settings,\n  report,\n  context,\n  iteratingAll,\n  ruleConfig,\n  indent,\n) => {\n  const ancestors = context.getAncestors();\n  const sourceCode = context.getSourceCode();\n\n  const utils = getBasicUtils(context, settings);\n\n  const {\n    tagNamePreference,\n    overrideReplacesDocs,\n    implementsReplacesDocs,\n    augmentsExtendsReplacesDocs,\n    maxLines,\n    minLines,\n    mode,\n  } = settings;\n\n  utils.isIteratingFunction = () => {\n    return !iteratingAll || [\n      'MethodDefinition',\n      'ArrowFunctionExpression',\n      'FunctionDeclaration',\n      'FunctionExpression',\n    ].includes(node && node.type);\n  };\n\n  utils.isVirtualFunction = () => {\n    return iteratingAll && utils.hasATag(['callback', 'function', 'func', 'method']);\n  };\n\n  utils.stringify = (tagBlock, specRewire) => {\n    return commentStringify(specRewire ? rewireSpecs(tagBlock) : tagBlock);\n  };\n\n  utils.reportJSDoc = (msg, tag, handler, specRewire) => {\n    report(msg, handler ? (fixer) => {\n      handler();\n      const replacement = utils.stringify(jsdoc, specRewire);\n\n      return fixer.replaceText(jsdocNode, replacement);\n    } : null, tag);\n  };\n\n  utils.getRegexFromString = (str, requiredFlags) => {\n    return jsdocUtils.getRegexFromString(str, requiredFlags);\n  };\n\n  utils.getTagDescription = (tg) => {\n    const descriptions = [];\n    tg.source.some(({\n      tokens: {end, postDelimiter, tag, postTag, name, type, description},\n    }) => {\n      const desc = (\n        tag && postTag ||\n        !tag && !name && !type && postDelimiter || ''\n\n      // Remove space\n      ).slice(1) +\n        (description || '');\n\n      if (end) {\n        if (desc) {\n          descriptions.push(desc);\n        }\n\n        return true;\n      }\n      descriptions.push(desc);\n\n      return false;\n    });\n\n    return descriptions.join('\\n');\n  };\n\n  utils.getDescription = () => {\n    const descriptions = [];\n    let lastDescriptionLine;\n    if (jsdoc.source[0].tokens.description) {\n      descriptions.push(jsdoc.source[0].tokens.description);\n    }\n    jsdoc.source.slice(1).some(({tokens: {description, tag, end}}, idx) => {\n      if (tag || end) {\n        lastDescriptionLine = idx;\n\n        return true;\n      }\n      descriptions.push(description);\n\n      return false;\n    });\n\n    return {\n      description: descriptions.join('\\n'),\n      lastDescriptionLine,\n    };\n  };\n\n  utils.changeTag = (tag, ...tokens) => {\n    tag.source.forEach((src, idx) => {\n      src.tokens = {\n        ...src.tokens,\n        ...tokens[idx],\n      };\n    });\n  };\n\n  utils.setTag = (tag, tokens) => {\n    tag.source = [{\n      // Or tag.source[0].number?\n      number: tag.line,\n      tokens: seedTokens({\n        delimiter: '*',\n        postDelimiter: ' ',\n        start: indent + ' ',\n        tag: '@' + tag.tag,\n        ...tokens,\n      }),\n    }];\n  };\n\n  utils.removeTag = (tagIndex) => {\n    const {source} = jsdoc.tags[tagIndex];\n    let lastIndex;\n    const firstNumber = jsdoc.source[0].number;\n    source.forEach(({number}) => {\n      const sourceIndex = jsdoc.source.findIndex(({\n        number: srcNumber, tokens: {end},\n      }) => {\n        return number === srcNumber && !end;\n      });\n      if (sourceIndex > -1) {\n        jsdoc.source.splice(sourceIndex, 1);\n        lastIndex = sourceIndex;\n      }\n    });\n    jsdoc.source.slice(lastIndex).forEach((src, idx) => {\n      src.number = firstNumber + lastIndex + idx;\n    });\n  };\n\n  utils.addTag = (targetTagName) => {\n    const number = (jsdoc.tags[jsdoc.tags.length - 1]?.source[0]?.number ?? 0) + 1;\n    jsdoc.source.splice(number, 0, {\n      number,\n      source: '',\n      tokens: seedTokens({\n        delimiter: '*',\n        postDelimiter: ' ',\n        start: indent + ' ',\n        tag: `@${targetTagName}`,\n      }),\n    });\n    jsdoc.source.slice(number + 1).forEach((src) => {\n      src.number++;\n    });\n  };\n\n  utils.flattenRoots = (params) => {\n    return jsdocUtils.flattenRoots(params);\n  };\n\n  utils.getFunctionParameterNames = (useDefaultObjectProperties) => {\n    return jsdocUtils.getFunctionParameterNames(node, useDefaultObjectProperties);\n  };\n\n  utils.hasParams = () => {\n    return jsdocUtils.hasParams(node);\n  };\n\n  utils.isGenerator = () => {\n    return node && (\n      node.generator ||\n      node.type === 'MethodDefinition' && node.value.generator ||\n      ['ExportNamedDeclaration', 'ExportDefaultDeclaration'].includes(node.type) &&\n        node.declaration.generator\n    );\n  };\n\n  utils.isConstructor = () => {\n    return jsdocUtils.isConstructor(node);\n  };\n\n  utils.getJsdocTagsDeep = (tagName) => {\n    const name = utils.getPreferredTagName({tagName});\n    if (!name) {\n      return false;\n    }\n\n    return jsdocUtils.getJsdocTagsDeep(jsdoc, name);\n  };\n\n  utils.getPreferredTagName = ({tagName, skipReportingBlockedTag = false, allowObjectReturn = false, defaultMessage = `Unexpected tag \\`@${tagName}\\``}) => {\n    const ret = jsdocUtils.getPreferredTagName(context, mode, tagName, tagNamePreference);\n    const isObject = ret && typeof ret === 'object';\n    if (utils.hasTag(tagName) && (ret === false || isObject && !ret.replacement)) {\n      if (skipReportingBlockedTag) {\n        return {\n          blocked: true,\n          tagName,\n        };\n      }\n      const message = isObject && ret.message || defaultMessage;\n      report(message, null, utils.getTags(tagName)[0]);\n\n      return false;\n    }\n\n    return isObject && !allowObjectReturn ? ret.replacement : ret;\n  };\n\n  utils.isValidTag = (name, definedTags) => {\n    return jsdocUtils.isValidTag(context, mode, name, definedTags);\n  };\n\n  utils.hasATag = (name) => {\n    return jsdocUtils.hasATag(jsdoc, name);\n  };\n\n  utils.hasTag = (name) => {\n    return jsdocUtils.hasTag(jsdoc, name);\n  };\n\n  utils.comparePaths = (name) => {\n    return jsdocUtils.comparePaths(name);\n  };\n\n  utils.dropPathSegmentQuotes = (name) => {\n    return jsdocUtils.dropPathSegmentQuotes(name);\n  };\n\n  utils.avoidDocs = () => {\n    if (\n      overrideReplacesDocs !== false &&\n        (utils.hasTag('override') || utils.classHasTag('override')) ||\n      implementsReplacesDocs !== false &&\n        (utils.hasTag('implements') || utils.classHasTag('implements')) ||\n\n      augmentsExtendsReplacesDocs &&\n        (utils.hasATag(['augments', 'extends']) ||\n          utils.classHasTag('augments') ||\n            utils.classHasTag('extends'))) {\n      return true;\n    }\n\n    if (jsdocUtils.exemptSpeciaMethods(\n      jsdoc, node, context, ruleConfig.meta.schema,\n    )) {\n      return true;\n    }\n\n    const exemptedBy = context.options[0]?.exemptedBy ?? [\n      'inheritDoc',\n      ...mode === 'closure' ? [] : ['inheritdoc'],\n    ];\n    if (exemptedBy.length && utils.getPresentTags(exemptedBy).length) {\n      return true;\n    }\n\n    return false;\n  };\n\n  [\n    'tagMightHaveNamePosition',\n    'tagMightHaveTypePosition',\n  ].forEach((method) => {\n    utils[method] = (tagName, otherModeMaps) => {\n      const result = jsdocUtils[method](tagName);\n      if (result) {\n        return true;\n      }\n\n      if (!otherModeMaps) {\n        return false;\n      }\n\n      const otherResult = otherModeMaps.some((otherModeMap) => {\n        return jsdocUtils[method](tagName, otherModeMap);\n      });\n\n      return otherResult ? {otherMode: true} : false;\n    };\n  });\n\n  [\n    'tagMustHaveNamePosition',\n    'tagMustHaveTypePosition',\n    'tagMissingRequiredTypeOrNamepath',\n  ].forEach((method) => {\n    utils[method] = (tagName, otherModeMaps) => {\n      const result = jsdocUtils[method](tagName);\n      if (!result) {\n        return false;\n      }\n\n      // if (!otherModeMaps) { return true; }\n\n      const otherResult = otherModeMaps.every((otherModeMap) => {\n        return jsdocUtils[method](tagName, otherModeMap);\n      });\n\n      return otherResult ? true : {otherMode: false};\n    };\n  });\n\n  [\n    'isNamepathDefiningTag',\n    'tagMightHaveNamepath',\n  ].forEach((method) => {\n    utils[method] = (tagName) => {\n      return jsdocUtils[method](tagName);\n    };\n  });\n\n  utils.getTagStructureForMode = (mde) => {\n    return jsdocUtils.getTagStructureForMode(mde, settings.structuredTags);\n  };\n\n  utils.hasDefinedTypeTag = (tag) => {\n    return jsdocUtils.hasDefinedTypeTag(tag);\n  };\n\n  utils.hasValueOrExecutorHasNonEmptyResolveValue = (anyPromiseAsReturn) => {\n    return jsdocUtils.hasValueOrExecutorHasNonEmptyResolveValue(node, anyPromiseAsReturn);\n  };\n\n  utils.hasYieldValue = () => {\n    if (['ExportNamedDeclaration', 'ExportDefaultDeclaration'].includes(node.type)) {\n      return jsdocUtils.hasYieldValue(node.declaration);\n    }\n\n    return jsdocUtils.hasYieldValue(node);\n  };\n\n  utils.hasYieldReturnValue = () => {\n    return jsdocUtils.hasYieldValue(node, true);\n  };\n\n  utils.hasThrowValue = () => {\n    return jsdocUtils.hasThrowValue(node);\n  };\n\n  utils.isAsync = () => {\n    return node.async;\n  };\n\n  utils.getTags = (tagName) => {\n    return utils.filterTags((item) => {\n      return item.tag === tagName;\n    });\n  };\n\n  utils.getPresentTags = (tagList) => {\n    return utils.filterTags((tag) => {\n      return tagList.includes(tag.tag);\n    });\n  };\n\n  utils.filterTags = (filter) => {\n    return jsdocUtils.filterTags(jsdoc.tags, filter);\n  };\n\n  utils.getTagsByType = (tags) => {\n    return jsdocUtils.getTagsByType(context, mode, tags, tagNamePreference);\n  };\n\n  utils.hasOptionTag = (tagName) => {\n    const {tags} = context.options[0] ?? {};\n\n    return Boolean(tags && tags.includes(tagName));\n  };\n\n  utils.getClassNode = () => {\n    return [...ancestors, node].reverse().find((parent) => {\n      return parent && ['ClassDeclaration', 'ClassExpression'].includes(parent.type);\n    }) || null;\n  };\n\n  utils.getClassJsdoc = () => {\n    const classNode = utils.getClassNode();\n\n    if (!classNode) {\n      return null;\n    }\n\n    const classJsdocNode = getJSDocComment(sourceCode, classNode, {\n      maxLines,\n      minLines,\n    });\n\n    if (classJsdocNode) {\n      const indnt = ' '.repeat(classJsdocNode.loc.start.column);\n\n      return parseComment(classJsdocNode, indnt);\n    }\n\n    return null;\n  };\n\n  utils.classHasTag = (tagName) => {\n    const classJsdoc = utils.getClassJsdoc();\n\n    return Boolean(classJsdoc) && jsdocUtils.hasTag(classJsdoc, tagName);\n  };\n\n  utils.forEachPreferredTag = (tagName, arrayHandler, skipReportingBlockedTag = false) => {\n    const targetTagName = utils.getPreferredTagName({\n      skipReportingBlockedTag,\n      tagName,\n    });\n    if (!targetTagName ||\n      skipReportingBlockedTag && targetTagName && typeof targetTagName === 'object'\n    ) {\n      return;\n    }\n    const matchingJsdocTags = _.filter(jsdoc.tags, {\n      tag: targetTagName,\n    });\n\n    matchingJsdocTags.forEach((matchingJsdocTag) => {\n      arrayHandler(matchingJsdocTag, targetTagName);\n    });\n  };\n\n  return utils;\n};\n\nconst getSettings = (context) => {\n  /* eslint-disable sort-keys-fix/sort-keys-fix */\n  const settings = {\n    // All rules\n    ignorePrivate: Boolean(context.settings.jsdoc?.ignorePrivate),\n    ignoreInternal: Boolean(context.settings.jsdoc?.ignoreInternal),\n    maxLines: Number(context.settings.jsdoc?.maxLines ?? 1),\n    minLines: Number(context.settings.jsdoc?.minLines ?? 0),\n\n    // `check-tag-names` and many returns/param rules\n    tagNamePreference: context.settings.jsdoc?.tagNamePreference ?? {},\n\n    // `check-types` and `no-undefined-types`\n    preferredTypes: context.settings.jsdoc?.preferredTypes ?? {},\n\n    // `check-types`, `no-undefined-types`, `valid-types`\n    structuredTags: context.settings.jsdoc?.structuredTags ?? {},\n\n    // `require-param`, `require-description`, `require-example`, `require-returns`\n    overrideReplacesDocs: context.settings.jsdoc?.overrideReplacesDocs,\n    implementsReplacesDocs: context.settings.jsdoc?.implementsReplacesDocs,\n    augmentsExtendsReplacesDocs: context.settings.jsdoc?.augmentsExtendsReplacesDocs,\n\n    // Many rules, e.g., `check-tag-names`\n    mode: context.settings.jsdoc?.mode ??\n      (context.parserPath.includes('@typescript-eslint') ? 'typescript' : 'jsdoc'),\n  };\n  /* eslint-enable sort-keys-fix/sort-keys-fix */\n\n  jsdocUtils.setTagStructure(settings.mode);\n  try {\n    jsdocUtils.overrideTagStructure(settings.structuredTags);\n  } catch (error) {\n    context.report({\n      loc: {\n        start: {\n          column: 1,\n          line: 1,\n        },\n      },\n      message: error.message,\n    });\n\n    return false;\n  }\n\n  return settings;\n};\n\n/**\n * Create the report function\n *\n * @param {object} context\n * @param {object} commentNode\n */\nconst makeReport = (context, commentNode) => {\n  const report = (message, fix = null, jsdocLoc = null, data = null) => {\n    let loc;\n\n    if (jsdocLoc) {\n      if (!('line' in jsdocLoc)) {\n        jsdocLoc.line = jsdocLoc.source[0].number;\n      }\n\n      const lineNumber = commentNode.loc.start.line + jsdocLoc.line;\n\n      loc = {\n        end: {line: lineNumber},\n        start: {line: lineNumber},\n      };\n      if (jsdocLoc.column) {\n        const colNumber = commentNode.loc.start.column + jsdocLoc.column;\n\n        loc.end.column = colNumber;\n        loc.start.column = colNumber;\n      }\n    }\n\n    context.report({\n      data,\n      fix,\n      loc,\n      message,\n      node: commentNode,\n    });\n  };\n\n  return report;\n};\n\n/**\n * @typedef {ReturnType<typeof getUtils>} Utils\n * @typedef {ReturnType<typeof getSettings>} Settings\n * @typedef {(\n *   arg: {\n *     context: object,\n *     sourceCode: object,\n *     indent: string,\n *     jsdoc: object,\n *     jsdocNode: object,\n *     node: object | null,\n *     report: ReturnType<typeof makeReport>,\n *     settings: Settings,\n *     utils: Utils,\n *   }\n * ) => any } JsdocVisitor\n */\n\nconst iterate = (\n  ruleConfig, context, lines, jsdocNode, node, settings,\n  sourceCode, iterator, state, iteratingAll,\n) => {\n  const sourceLine = lines[jsdocNode.loc.start.line - 1];\n  const indent = sourceLine.charAt(0).repeat(jsdocNode.loc.start.column);\n  const jsdoc = parseComment(jsdocNode, indent);\n  const report = makeReport(context, jsdocNode);\n\n  const utils = getUtils(\n    node,\n    jsdoc,\n    jsdocNode,\n    settings,\n    report,\n    context,\n    iteratingAll,\n    ruleConfig,\n    indent,\n  );\n\n  if (\n    !ruleConfig.checkInternal && settings.ignoreInternal &&\n    utils.hasTag('internal')\n  ) {\n    return;\n  }\n  if (\n    !ruleConfig.checkPrivate && settings.ignorePrivate &&\n    (utils.hasTag('private') || _.filter(jsdoc.tags, {\n      tag: 'access',\n    }).some(({description}) => {\n      return description === 'private';\n    }))\n  ) {\n    return;\n  }\n\n  iterator({\n    context,\n    globalState,\n    indent,\n    iteratingAll,\n    jsdoc,\n    jsdocNode,\n    node,\n    report,\n    settings,\n    sourceCode,\n    state,\n    utils,\n  });\n};\n\n/**\n * Create an eslint rule that iterates over all JSDocs, regardless of whether\n * they are attached to a function-like node.\n *\n * @param {JsdocVisitor} iterator\n * @param {{meta: any}} ruleConfig\n */\nconst iterateAllJsdocs = (iterator, ruleConfig) => {\n  const trackedJsdocs = [];\n\n  let settings;\n  const callIterator = (context, node, jsdocNodes, state, lastCall) => {\n    const sourceCode = context.getSourceCode();\n    const {lines} = sourceCode;\n\n    const utils = getBasicUtils(context, settings);\n    jsdocNodes.forEach((jsdocNode) => {\n      if (!(/^\\/\\*\\*\\s/).test(sourceCode.getText(jsdocNode))) {\n        return;\n      }\n      iterate(\n        ruleConfig, context, lines, jsdocNode, node,\n        settings, sourceCode, iterator,\n        state, true,\n      );\n    });\n    if (lastCall && ruleConfig.exit) {\n      ruleConfig.exit({\n        context,\n        state,\n        utils,\n      });\n    }\n  };\n\n  return {\n    create (context) {\n      const sourceCode = context.getSourceCode();\n      settings = getSettings(context);\n      if (!settings) {\n        return {};\n      }\n\n      const state = {};\n\n      return {\n        '*:not(Program)' (node) {\n          const reducedNode = getReducedASTNode(node, sourceCode);\n\n          if (node !== reducedNode) {\n            return;\n          }\n\n          const comment = getJSDocComment(sourceCode, node, settings);\n          if (trackedJsdocs.includes(comment)) {\n            return;\n          }\n          if (!comment) {\n            if (ruleConfig.nonComment) {\n              ruleConfig.nonComment({\n                node,\n                state,\n              });\n            }\n\n            return;\n          }\n\n          trackedJsdocs.push(comment);\n          callIterator(context, node, [comment], state);\n        },\n        'Program:exit' () {\n          const allComments = sourceCode.getAllComments();\n          const untrackedJSdoc = allComments.filter((node) => {\n            return !trackedJsdocs.includes(node);\n          });\n\n          callIterator(context, null, untrackedJSdoc, state, true);\n        },\n      };\n    },\n    meta: ruleConfig.meta,\n  };\n};\n\n/**\n * Create an eslint rule that iterates over all JSDocs, regardless of whether\n * they are attached to a function-like node.\n *\n * @param {JsdocVisitor} iterator\n * @param {{meta: any}} ruleConfig\n */\nconst checkFile = (iterator, ruleConfig) => {\n  return {\n    create (context) {\n      const sourceCode = context.getSourceCode();\n      const settings = getSettings(context);\n      if (!settings) {\n        return {};\n      }\n\n      return {\n        'Program:exit' () {\n          const allComments = sourceCode.getAllComments();\n          const {lines} = sourceCode;\n          const utils = getBasicUtils(context, settings);\n\n          iterator({\n            allComments,\n            context,\n            lines,\n            makeReport,\n            settings,\n            sourceCode,\n            utils,\n          });\n        },\n      };\n    },\n    meta: ruleConfig.meta,\n  };\n};\n\nexport {\n  getSettings,\n  parseComment,\n};\n\n/**\n * @param {JsdocVisitor} iterator\n * @param {{\n *   meta: any,\n *   contextDefaults?: true | string[],\n *   iterateAllJsdocs?: true,\n * }} ruleConfig\n */\nexport default function iterateJsdoc (iterator, ruleConfig) {\n  const metaType = ruleConfig?.meta?.type;\n  if (!metaType || !['problem', 'suggestion', 'layout'].includes(metaType)) {\n    throw new TypeError('Rule must include `meta.type` option (with value \"problem\", \"suggestion\", or \"layout\")');\n  }\n  if (typeof iterator !== 'function') {\n    throw new TypeError('The iterator argument must be a function.');\n  }\n\n  if (ruleConfig.checkFile) {\n    return checkFile(iterator, ruleConfig);\n  }\n\n  if (ruleConfig.iterateAllJsdocs) {\n    return iterateAllJsdocs(iterator, ruleConfig);\n  }\n\n  return {\n    /**\n     * The entrypoint for the JSDoc rule.\n     *\n     * @param {*} context\n     *   a reference to the context which hold all important information\n     *   like settings and the sourcecode to check.\n     * @returns {object}\n     *   a list with parser callback function.\n     */\n    create (context) {\n      let contexts;\n      if (ruleConfig.contextDefaults) {\n        contexts = jsdocUtils.enforcedContexts(context, ruleConfig.contextDefaults);\n        if (contexts.includes('any')) {\n          return iterateAllJsdocs(iterator, ruleConfig).create(context);\n        }\n      }\n      const sourceCode = context.getSourceCode();\n      const settings = getSettings(context);\n      if (!settings) {\n        return {};\n      }\n      const {lines} = sourceCode;\n\n      const checkJsdoc = (node) => {\n        const jsdocNode = getJSDocComment(sourceCode, node, settings);\n\n        if (!jsdocNode) {\n          return;\n        }\n\n        iterate(\n          ruleConfig, context, lines, jsdocNode, node,\n          settings, sourceCode, iterator,\n        );\n      };\n\n      if (ruleConfig.contextDefaults) {\n        return jsdocUtils.getContextObject(contexts, checkJsdoc);\n      }\n\n      return {\n        ArrowFunctionExpression: checkJsdoc,\n        FunctionDeclaration: checkJsdoc,\n        FunctionExpression: checkJsdoc,\n      };\n    },\n    meta: ruleConfig.meta,\n  };\n}\n"],"file":"iterateJsdoc.js"}